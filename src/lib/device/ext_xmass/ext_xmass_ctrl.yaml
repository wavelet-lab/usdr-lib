# Copyright (c) 2023-2024 Wavelet Lab
# SPDX-License-Identifier: MIT

# Register desc and visual map
name:         XMASS_CTRL
desc:         XMass Debug control GPIOs
revision:     "0.0.1"
processors:   [ c ]
bus:
    type: VIRTUAL
    usdr_path: /debug/hw/xmass_ctrl/0/reg
    wr_mask: 0x80000000
addr_width:   8
data_width:   24
# page_prefix:  True
field_prefix: [ RegName ]
field_macros: True

pages:
  - name: I2C_GPIO
    regs:
#
      - addr: 0x00
        name: P0
        fields:
          - bits: "0"
            name: BDISTRIB
            desc: Enable OUT_REF_B and OUT_SYREF_B[0 for 4 sync boards
          - bits: "1"
            name: BLOCAL
            desc: Enable local PPS and REF distribution
          - bits: "2"
            name: RF_CAL_DST_SEL
            desc: 0 - RF_CAL_EXT (general rx port) / 1 - RF_CAL_INT (LNA3 port)
          - bits: "3"
            name: RF_CAL_SRC_SEL
            desc: 0 - RF_LO_SRC (from LMK) / 1 - RF_NOISE_SRC (from NOISE GEN)
          - bits: "4"
            name: GPS_PWREN
            desc: Enable GPS module + DC-bias
          - bits: "5"
            name: LMK_SYNCN
            desc: Set LMK05318B SYNC_N port
          - bits: "6"
            name: SYSREF_1PPS_SEL
            desc: 0 - LMK_1PPS, 1 - From SDR_A
          - bits: "7"
            name: EN_LMX
            desc: Enable LMK05318B
#
      - addr: 0x01
        name: P1
        fields:
          - bits: "0"
            name: RF_EN
            desc: Enables Power Amplifiers
          - bits: "1"
            name: RF_CAL_SW
            desc: 0 - Use RF cal source as FB, 1 - Use XSDR TX as FB
          - bits: "2"
            name: RF_LB_SW
            desc: 0 - Normal operation, 1 - use LB path to XSDR RX
          - bits: "3"
            name: RF_NOISE_EN
            desc: Enable 14V generator for Zener noise source
          - bits: "4"
            name: SYSREF_GPSRX_SEL
            desc: 0 - TX_SYREF_MUX demuliplexing to CLK_SYSREF_OUT, 1 TX_SYREF_MUX to GPS_RX
          - bits: "7:5"
            name: RTS
            desc: Interboard sync logic
